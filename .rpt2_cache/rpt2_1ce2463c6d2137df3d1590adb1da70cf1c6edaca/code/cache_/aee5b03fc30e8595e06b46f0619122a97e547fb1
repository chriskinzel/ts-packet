{"code":"import { encode } from 'utf8';\r\nimport { PACKET_STRUCTURE_SYMBOL } from './Types';\r\nexport function PacketField(fieldType, ...args) {\r\n    const decorator = (target, key) => {\r\n        if (Object.getOwnPropertyDescriptor(target, PACKET_STRUCTURE_SYMBOL) == null) {\r\n            target[PACKET_STRUCTURE_SYMBOL] = {};\r\n        }\r\n        const size = args[0];\r\n        if (size === undefined) {\r\n            target[PACKET_STRUCTURE_SYMBOL][key] = { type: fieldType };\r\n        }\r\n        else if (typeof size === 'number') {\r\n            target[PACKET_STRUCTURE_SYMBOL][key] = { type: fieldType, length: size };\r\n        }\r\n        else {\r\n            target[PACKET_STRUCTURE_SYMBOL][key] = {\r\n                type: fieldType,\r\n                get length() { return size(); }\r\n            };\r\n        }\r\n        const parentTarget = Object.getPrototypeOf(target);\r\n        const parentStructure = parentTarget[PACKET_STRUCTURE_SYMBOL];\r\n        if (parentStructure) {\r\n            Object.assign(target[PACKET_STRUCTURE_SYMBOL], parentStructure, target[PACKET_STRUCTURE_SYMBOL]);\r\n        }\r\n    };\r\n    return decorator;\r\n}\r\nexport function utf8StringLength(str) {\r\n    return encode(str).length;\r\n}\r\n//# sourceMappingURL=Decorator.js.map","map":"{\"version\":3,\"file\":\"Decorator.js\",\"sourceRoot\":\"\",\"sources\":[\"../../lib/Decorator.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,MAAM,EAAC,MAAM,MAAM,CAAC;AAC5B,OAAO,EACH,uBAAuB,EAI1B,MAAM,SAAS,CAAC;AAEjB,MAAM,UAAU,WAAW,CAA4B,SAAY,EACZ,GAAG,IAEgB;IACtE,MAAM,SAAS,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE;QAC9B,IAAI,MAAM,CAAC,wBAAwB,CAAC,MAAM,EAAE,uBAAuB,CAAC,IAAI,IAAI,EAAE;YAC1E,MAAM,CAAC,uBAAuB,CAAC,GAAG,EAAE,CAAC;SACxC;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QAErB,IAAI,IAAI,KAAK,SAAS,EAAE;YACpB,MAAM,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;SAC9D;aAAM,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;YACjC,MAAM,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;SAC5E;aAAM;YACH,MAAM,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,GAAG;gBACnC,IAAI,EAAE,SAAS;gBACf,IAAI,MAAM,KAAK,OAAQ,IAAqB,EAAE,CAAC,CAAC,CAAC;aACpD,CAAC;SACL;QAED,MAAM,YAAY,GAAM,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QACtD,MAAM,eAAe,GAAG,YAAY,CAAC,uBAAuB,CAAC,CAAC;QAE9D,IAAI,eAAe,EAAE;YACjB,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,uBAAuB,CAAC,EAAE,eAAe,EAAE,MAAM,CAAC,uBAAuB,CAAC,CAAC,CAAC;SACpG;IACL,CAAC,CAAC;IAEF,OAAO,SAAoC,CAAC;AAChD,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,GAAW;IACxC,OAAO,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;AAC9B,CAAC\"}","dts":{"name":"/Users/Chris/Projects/ts-packet/Decorator.d.ts","writeByteOrderMark":false,"text":"import { PacketFieldDecorator, PacketFieldType, PacketFieldVariableWidthType } from './Types';\r\nexport declare function PacketField<T extends PacketFieldType>(fieldType: T, ...args: (T extends PacketFieldVariableWidthType ? [number | (() => number)] : [undefined?])): PacketFieldDecorator<T>;\r\nexport declare function utf8StringLength(str: string): number;\r\n"}}
