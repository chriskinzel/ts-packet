{"code":"import { encode } from 'utf8';\r\nimport { PACKET_STRUCTURE_SYMBOL } from '../types/Types';\r\nexport function PacketField(fieldType, ...args) {\r\n    const decorator = (target, key) => {\r\n        if (target[PACKET_STRUCTURE_SYMBOL] === undefined || target[PACKET_STRUCTURE_SYMBOL] === null) {\r\n            target[PACKET_STRUCTURE_SYMBOL] = {};\r\n        }\r\n        const size = args[0];\r\n        if (size === undefined) {\r\n            target[PACKET_STRUCTURE_SYMBOL][key] = { type: fieldType };\r\n        }\r\n        else if (typeof size === 'number') {\r\n            target[PACKET_STRUCTURE_SYMBOL][key] = { type: fieldType, length: size };\r\n        }\r\n        else {\r\n            target[PACKET_STRUCTURE_SYMBOL][key] = {\r\n                type: fieldType,\r\n                get length() { return size(); }\r\n            };\r\n        }\r\n    };\r\n    return decorator;\r\n}\r\nexport function utf8StringLength(str) {\r\n    return encode(str).length;\r\n}\r\n//# sourceMappingURL=Decorator.js.map","map":"{\"version\":3,\"file\":\"Decorator.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../lib/main/Decorator.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAC,MAAM,EAAC,MAAM,MAAM,CAAC;AAC5B,OAAO,EACH,uBAAuB,EAI1B,MAAM,gBAAgB,CAAC;AAExB,MAAM,UAAU,WAAW,CAA4B,SAAY,EACZ,GAAG,IAEgB;IACtE,MAAM,SAAS,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,EAAE;QAC9B,IAAI,MAAM,CAAC,uBAAuB,CAAC,KAAK,SAAS,IAAI,MAAM,CAAC,uBAAuB,CAAC,KAAK,IAAI,EAAE;YAC3F,MAAM,CAAC,uBAAuB,CAAC,GAAG,EAAE,CAAC;SACxC;QAED,MAAM,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QAErB,IAAI,IAAI,KAAK,SAAS,EAAE;YACpB,MAAM,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE,SAAS,EAAE,CAAC;SAC9D;aAAM,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;YACjC,MAAM,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;SAC5E;aAAM;YACH,MAAM,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,GAAG;gBACnC,IAAI,EAAE,SAAS;gBACf,IAAI,MAAM,KAAK,OAAQ,IAAqB,EAAE,CAAC,CAAC,CAAC;aACpD,CAAC;SACL;IACL,CAAC,CAAC;IAEF,OAAO,SAAoC,CAAC;AAChD,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,GAAW;IACxC,OAAO,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;AAC9B,CAAC\"}","dts":{"name":"/Users/Chris/Projects/ts-packet/main/Decorator.d.ts","writeByteOrderMark":false,"text":"import { PacketFieldDecorator, PacketFieldType, PacketFieldVariableWidthType } from '../types/Types';\r\nexport declare function PacketField<T extends PacketFieldType>(fieldType: T, ...args: (T extends PacketFieldVariableWidthType ? [number | (() => number)] : [undefined?])): PacketFieldDecorator<T>;\r\nexport declare function utf8StringLength(str: string): number;\r\n"}}
